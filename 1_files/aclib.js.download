!function(){"use strict";class e{constructor(e="adcsh",t=!1){this.tagName=e,this.isDebugEnabled=t,(t=localStorage.getItem("adcsh_dbg"))&&(this.isDebugEnabled=JSON.parse(t))}#e(e,t){this.isDebugEnabled&&console.log(`[${this.tagName}][${e}]:`,...t)}debug(...e){this.#e("debug",e)}error(...e){this.#e("error",e)}}const t=(e,t,i)=>e.addEventListener?e.addEventListener(t,i):e.attachEvent(`on${t}`,i),i=(e,t,i)=>{if(e.removeEventListener)return e.removeEventListener(t,i);e.detachEvent(`on${t}`,i)},n=async(e,t=!1)=>"undefined"!=typeof navigator&&"userAgentData"in navigator?navigator.userAgentData.getHighEntropyValues(["model","platform","platformVersion","uaFullVersion"]).then(e=>{const i={};if(e.hasOwnProperty("brands")&&e.brands.length>0){const t=[];for(let i=0;i<e.brands.length;i+=1){const n=e.brands[i];t.push(`"${n.brand}";v=${n.version}`)}i.chu=encodeURIComponent(t.join(", "))}e.hasOwnProperty("mobile")&&(i.chmob=encodeURIComponent(e.mobile?"?1":"?0"));const n={model:"chmod",platform:"chp",platformVersion:"chpv",uaFullVersion:"chuafv"};for(const t in n)e.hasOwnProperty(t)&&e[t]&&(i[n[t]]=encodeURIComponent(e[t]));if(t)return i;let o="";for(let e in i)o+=`&${e}=${i[e]}`;return o}).catch(t=>(e.error("error getting client hints:",t),"")):t?{}:"",o=()=>{let e=window.location.href;return s()&&(e=document.referrer),r(e)},s=()=>{try{return window.self!==window.top?1:0}catch(e){return 1}},r=e=>{let t=Math.max(e.indexOf(" ",256),e.indexOf(",",256));return(t>384||t<20)&&(t=256),e.substring(0,t)},a=()=>{if(void 0===window.rgxngibqxq||""===window.rgxngibqxq){let e=[],t="0123456789abcdefghijklmnopqrstuvwxyz";for(let i=0;i<32;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),window.rgxngibqxq=e.join("")}return window.rgxngibqxq},d=()=>{let e=document.title;if(s())try{e=window.top.document.title}catch(t){e=""}return r(e)},l=()=>{var e=document.referrer;if(s())try{e=window.top.document.referrer}catch(t){e=""}return r(e)},c=(e,t=null)=>{try{const t=window.top.document.getElementsByTagName("meta");for(let i=0;i<t.length;i++)if(t[i].hasAttribute("name")&&t[i].getAttribute("name").toLowerCase()===e){const e=t[i].getAttribute("content");return r(e)}}catch(e){t&&t.error(e)}return""},h=/opera/i.test(navigator.userAgent),g=/chrome|crios/i.test(navigator.userAgent),u=/firefox/i.test(navigator.userAgent),p=(navigator.userAgent.match(/.+(?:ox|me|ra|ie|Edge)[\/: ]([\d.]+)/)||[])[1],b=parseInt(p),m=/android/i.test(navigator.userAgent),w=/ipad|ipod|iphone/i.test(navigator.userAgent),f=/blackberry/i.test(navigator.userAgent)||/BB10/i.test(navigator.userAgent),v=/iemobile/i.test(navigator.userAgent)||/(?=.*\bWindows\b)(?=.*\bARM\b)/i.test(navigator.userAgent)||/Windows Phone/i.test(navigator.userAgent),y=/opera mini/i.test(navigator.userAgent)||/opios/i.test(navigator.userAgent),S=/^((?!UCWEB).)*UCBrowser.*Mobile.+/i.test(navigator.userAgent),k=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i.test(navigator.userAgent),A=/(KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA|JSS15J|Silk|Kindle)/i.test(navigator.userAgent),I=/fban\/fbios|fbav|fbios|fb_iab\/fb4a/i.test(navigator.userAgent),x=m||w||f||v||y||S||k||A||I,C=/pinterest\/(ios|android)/i.test(navigator.userAgent),T=(e,t=1,i=15)=>((e,t)=>{let i="";for(let n=0;n<t;n++)i+=e[Math.floor(Math.random()*e.length)];return i})(e,Math.floor(Math.random()*(i-t+1))+t),E=e=>{if((e=new URL(e)).search){const t=T("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",24,24),i=e.searchParams.entries(),n=Array.from(i);(e=>{for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}})(n);const o=n.map(e=>`${e[0]}=${encodeURIComponent(e[1])}`).join("&"),s=encodeURIComponent(btoa(o));e.search=`${t}=${s}`}return e.toString()},L=()=>`${navigator.platform}/${navigator.appCodeName}/${navigator.appName}/${navigator.cookieEnabled}/${navigator.javaEnabled()}/${navigator.vendor}`+Math.max(window.screen.width,window.screen.height)+"x"+Math.min(window.screen.width,window.screen.height)+(new Date).getTimezoneOffset()+navigator.language+(navigator.deviceMemory||"unknown")+navigator.hardwareConcurrency+screen.pixelDepth+" bits",O=(()=>{try{return!0===new Request("",{keepalive:!0}).keepalive}catch(e){return!1}})(),$=e=>JSON.parse(atob(e)),z=e=>{if(e.s){const t=$(e.s);return delete e.s,{...e,...t}}return["hp","hIpp","hInt"].forEach(t=>{e[t]&&(e[t]=$(e[t]))}),e},P=e=>"boolean"==typeof e,R=e=>Number.isInteger(e),D=e=>"[object String]"===Object.prototype.toString.call(e),F=e=>["top","bottom","top-left","top-right","bottom-left","bottom-right"].includes(e);class N{isCapped=!1;hasNoInventory=!1;show(){throw new Error("not implemented")}}const M="interstitial",B="pop",H="tabswap",V=(e,t,i,n,o)=>{const s=document.createElement("div");s.id="modal",s.style.position="fixed",s.style.top="5vh",s.style.left="50%",s.style.transform="translate(-50%)",s.style.maxWidth="95%",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="center",s.style.overflow="hidden",s.style.padding="10px",s.style.borderRadius="6px",s.style.backgroundColor="rgba(0, 0, 0, 0.6)",s.style.zIndex="2147483644",s.style.boxShadow="0 4px 8px rgba(0,0,0,0.2)",s.setAttribute("doskip","1"),s.setAttribute("prclck","1");const r=document.createElement("div");r.id="buttonContainer",r.style.display="block",r.style.margin="0",r.style.width="100%",r.style.textAlign="center",r.style.padding="0",r.style.height="36px",r.style.fontSize="16px",r.style.fontFamily='OpenSans-Semibold, Arial, "Helvetica Neue", Helvetica, sans-serif';const a=document.createElement("a");a.id="goToButton",a.style.float="left",a.style.borderRadius="4px",a.style.fontSize="12px",a.style.background="rgb(0, 0, 0)",a.style.opacity="1",a.style.textDecoration="none",a.style.color="rgb(255, 255, 255)",a.style.padding="10px 20px",a.style.cursor="pointer",a.style.display="inline-block",a.textContent=e,a.href=t,a.target="_blank",a.rel="noopener noreferrer";const d=document.createElement("div");d.id="closeButton",d.style.float="right",d.style.borderRadius="4px",d.style.fontSize="12px",d.style.background="rgb(0, 0, 0)",d.style.opacity="1",d.style.textDecoration="none",d.style.color="rgb(255, 255, 255)",d.style.padding="10px 20px",d.style.cursor="pointer",d.style.display="inline-block",d.textContent=i;const l=document.createElement("div");l.id="content",l.style.marginTop="10px",l.style.maxWidth="100%";const c=document.createElement("img");return c.id="impImg",c.style.display="none",c.width="0",c.height="0",c.src=o,r.appendChild(a),r.appendChild(d),s.appendChild(r),l.appendChild(n),s.appendChild(l),s.appendChild(c),s},U=(e,t,i,n,o)=>{const s=document.createElement("div");s.id="modal",s.style.textAlign="left",s.style.width="100%",s.style.height="100%",s.style.position="fixed",s.style.inset="0",s.style.zIndex="2147483646",s.style.backgroundColor="rgba(0,0,0,0.8)",s.setAttribute("doskip","1"),s.setAttribute("prclck","1");const r=document.createElement("div");r.id="buttonContainer",r.style.display="block",r.style.textAlign="center",r.style.padding="0",r.style.height="36px",r.style.fontSize="16px",r.style.fontFamily='OpenSans-Semibold, Arial, "Helvetica Neue", Helvetica, sans-serif',r.style.margin="6px 15px";const a=document.createElement("a");a.id="goToButton",a.style.float="left",a.style.borderRadius="4px",a.style.fontSize="16px",a.style.background="rgb(0, 0, 0)",a.style.textDecoration="none",a.style.color="rgb(255, 255, 255)",a.style.padding="10px 20px",a.style.cursor="pointer",a.style.display="inline-block",a.textContent=e,a.href=t,a.target="_blank",a.rel="noopener noreferrer";const d=document.createElement("div");d.id="closeButton",d.style.float="right",d.style.borderRadius="4px",d.style.fontSize="16px",d.style.background="rgb(0, 0, 0)",d.style.textDecoration="none",d.style.color="rgb(255, 255, 255)",d.style.padding="10px 20px",d.style.cursor="pointer",d.style.display="inline-block",d.textContent=i;const l=document.createElement("div");l.id="content",l.style.marginTop="10px",l.style.display="flex",l.style.justifyContent="center",l.style.width="100%",l.style.height="100%";const c=document.createElement("img");return c.id="impImg",c.style.display="none",c.width="0",c.height="0",c.src=o,r.appendChild(a),r.appendChild(d),s.appendChild(r),l.appendChild(n),s.appendChild(l),s.appendChild(c),s},W="utsid-send",q="prclck";class _{#t={};#i=null;#n=0;#o;#s;#r;constructor(e,t,i,n,o){this.#t=e,this.#i=i,this.#n=0,this.#o=t,this.#s=n,this.#r=o}render(e){let t=null;switch(e.type){case 1:this.#i.debug(`rendering INTERSTITIAL IFRAME (type 1) in ${this.#t.isOverlay?"OVERLAY":"FULLSCREEN"} mode`),t=this.#t.isOverlay?(e=>{const t=document.createElement("iframe");function i(){const e=window.innerWidth;e<=600?(t.style.width="90vw",t.style.height="70vh"):e>600&&e<=1024?(t.style.width="80vw",t.style.height="70vh"):(t.style.width="60vw",t.style.height="70vh")}return t.id="creative_iframe",t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.setAttribute("doskip","1"),t.setAttribute("prclck","1"),t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),t.setAttribute("referrerpolicy","no-referrer"),t.src=e,t.style.margin="0",t.style.padding="0",t.style.border="0",i(),window.addEventListener("resize",i),{content:t,resizeFunc:i}})(e.url):(e=>{const t=document.createElement("iframe");return t.id="creative_iframe",t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.setAttribute("doskip","1"),t.setAttribute("prclck","1"),t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),t.setAttribute("referrerpolicy","no-referrer"),t.src=e,t.style.margin="0",t.style.padding="0",t.style.border="0",t.style.width="100%",t.style.height="100%",{content:t,resizeFunc:null}})(e.url);break;case 3:this.#i.debug(`rendering INTERSTITIAL IMAGE (type 3) in ${this.#t.isOverlay?"OVERLAY":"FULLSCREEN"} mode`),t=this.#t.isOverlay?((e,t,i,n)=>{const o=document.createElement("a");o.id="a_click_link",o.href=e,o.rel="noopener noreferrer",o.target="_blank",o.style.display="block";const s=document.createElement("img");function r(){window.innerWidth/window.innerHeight>=1?(s.style.height="75vh",s.style.width="auto"):(s.style.height="auto",s.style.width="90vw")}return s.id="creative_image",s.src=t,s.alt="",s.setAttribute("referrerpolicy","no-referrer"),s.style.maxWidth=i+"px",s.style.maxHeight=n+"px",s.style.width="90vw",o.appendChild(s),r(),window.addEventListener("resize",r),{content:o,resizeFunc:r}})(e.url,e.ad.url,e.ad.width,e.ad.height):((e,t,i,n)=>{const o=document.createElement("a");o.id="a_click_link",o.href=e,o.rel="noopener noreferrer",o.target="_blank",o.style.display="block";const s=document.createElement("img");function r(){window.innerWidth>window.innerHeight?(s.style.width="auto",s.style.height="75vh"):(s.style.width="95vw",s.style.height="auto")}return s.id="creative_image",s.src=t,s.alt="",s.setAttribute("referrerpolicy","no-referrer"),s.style.maxWidth=i+"px",s.style.maxHeight=n+"px",s.style.width="95vw",o.appendChild(s),r(),window.addEventListener("resize",r),{content:o,resizeFunc:r}})(e.url,e.ad.url,e.ad.width,e.ad.height);break;case 4:if(e.isHtmlTemplate)return this.#i.debug("rendering INTERSTITIAL HTML CUSTOM (type 4)"),void this.#a(e);this.#i.debug(`rendering INTERSTITIAL HTML (type 4) in ${this.#t.isOverlay?"OVERLAY":"FULLSCREEN"} mode`),t=this.#t.isOverlay?(e=>{const t=document.createElement("iframe");function i(){const e=window.innerWidth;e<=600?(t.style.maxWidth="90vw",t.style.height="70vh"):e>600&&e<=1024?(t.style.maxWidth="80vw",t.style.height="70vh"):(t.style.maxWidth="60vw",t.style.minHeight="40vh")}return t.id="creative_iframe",t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.setAttribute("doskip","1"),t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("rel","noopener noreferrer"),t.setAttribute(e,"1"),t.style.margin="0",t.style.padding="0",t.style.border="0",i(),window.addEventListener("resize",i),{content:t,resizeFunc:i}})(q):(e=>{const t=document.createElement("iframe");return t.id="creative_iframe",t.setAttribute("allowfullscreen",""),t.setAttribute("frameborder","0"),t.setAttribute("doskip","1"),t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("rel","noopener noreferrer"),t.setAttribute(e,"1"),t.style.margin="0",t.style.padding="0",t.style.border="0",t.style.width="100%",t.style.height="100%",{content:t,resizeFunc:null}})(q);break;default:return void this.#i.error(`no such type of interstitial: ${e.type}`)}const i=document.createElement("div");document.body.appendChild(i);const n=i.attachShadow({mode:"open"}),o=this.#t.isOverlay?V:U;if(n.appendChild(o(this.#t.texts.goToButton,e.url,this.#d(),t.content,e.iurl)),4===e.type){const t=n.getElementById("creative_iframe");t.contentWindow.contents=e.html,t.src='javascript:window["contents"]'}if(!this.#t.disableCountdown&&this.#t.moveTimerInsideButtonAfter>0){this.#n=this.#t.moveTimerInsideButtonAfter,n.getElementById("closeButton").innerHTML=this.#d();const e=setInterval(()=>{this.#n--,n.getElementById("closeButton").innerHTML=this.#d(),0===this.#n&&clearInterval(e)},1e3)}n.getElementById("closeButton").addEventListener("click",()=>{this.#n>0||(this.#i.debug("close button click. remove modal host, resize listener if present and do callback"),i.remove(),t.resizeFunc&&window.removeEventListener("resize",t.resizeFunc),this.#o(M))})}#d(){let e=`${this.#t.texts.pleaseWait}: ${this.#n} ${this.#t.texts.timePlural}`;return 1===this.#n&&(e=`${this.#t.texts.pleaseWait}: ${this.#n} ${this.#t.texts.timeSingle}`),0===this.#n&&(e=this.#t.disableCountdown?this.#t.texts.xLabel:this.#t.texts.skipAd),e}#a(e){const n=(new DOMParser).parseFromString(e.html,"text/html").querySelector("script"),s=document.createElement("script");s.style.zIndex="2147483646",n.src?s.setAttribute("src",n.src):s.innerText=n.innerText;const r=()=>{this.#i.debug("CT-CLICK"),fetch(e.link,{mode:"no-cors"}),i(document,"ct-click",r)},a=()=>{this.#i.debug("CT-CLOSE"),i(document,"ct-click",r),i(document,"ct-close",a),document.body.removeChild(s),this.#o(M)};t(document,"ct-click",r),t(document,"ct-close",a);let d=e.iurl;window[W]&&(d+=`&utsid=${window[W]}`),d+=`&cbpage=${encodeURIComponent(o())}`,d+=`&cbref=${encodeURIComponent(l())}`,s.onload=async()=>{try{await fetch(d.toString())}catch(e){return this.#i.debug(e),void(this.#r&&!this.#s.isAdbMode()&&(this.#i.debug("imp failed: try alt domain and path"),this.#s.enableAdbMode()))}document.dispatchEvent(new CustomEvent("impression-event"))},s.onerror=()=>{this.#i.debug("custom html script failed to load"),this.#o(M)},document.body.appendChild(s)}}let j=class extends N{#l;#c;#h;#g;#u;#p;#b;#o;#m;#w;#s;#i;#f=!1;#t={};isCapped=!1;hasNoInventory=!1;#v=null;#r;#y=12;#S="70.0";#k=null;#A=!1;#I=!1;#x;constructor(t){super(),this.#i=new e(`atag_${t.collectiveZoneId}_interstitial_${t.zoneId}`),this.#i.debug("init atag interstitial with config:",t),this.#l=t.zoneId,this.#c=t.isFullscreen,this.#r=t.adblockSettings,this.#h=t.collectiveZoneId,this.#g=t.aggressivity,this.#u=t.recordPageView,this.#p=t.adsCapping,this.#b=t.abTest,this.#u=t.recordPageView,this.#o=t.actionCallback,this.#m=t.adserverDomain,this.#s=window[t.adcashGlobalName],this.#w=t.clientHintsQueryStr,this.#I=t.isLoadedAsPartOfLibrary,this.#x=t.uniqueFingerprint,t.tagVersionSuffix&&(this.#S+=t.tagVersionSuffix)}show(e){const t=this.#C(e);fetch(t).then(e=>200===e.status||202===e.status?e.json():(204===e.status&&(this.hasNoInventory=!0,this.#i.debug(`no inventory! reset after ${this.#y} sec`),setTimeout(()=>{this.hasNoInventory=!1},1e3*this.#y),this.#y<7200&&(this.#y*=5)),Promise.reject())).then(z).then(e=>{if(this.#i.debug("response:",e),e.capped_ttl)return this.isCapped=!0,this.#i.debug(`capped! reset after ${e.capped_ttl} sec`),setTimeout(()=>{this.isCapped=!1},1e3*e.capped_ttl),void this.#o(M);this.#y>12&&(this.#y=12),this.#f?this.#v=e:(this.#i.debug("initial request. configure"),this.#f=!0,this.#t={moveTimerInsideButtonAfter:e.moveTimerInsideButtonAfter,delay:e.delay,refreshRate:e.refreshRate,isOverlay:e.isOverlay,disableCountdown:e.disableCountdown,texts:e.texts,showOnInnerLinkClick:e.showOnInnerLinkClick},this.#v=e.adPayload,this.#k=new _(this.#t,this.#o,this.#i,this.#s,this.#r)),this.#w&&(this.#v.url+=this.#w,this.#v.iurl+=this.#w,this.#v.clickPixelUrl&&(this.#v.clickPixelUrl+=this.#w)),4===this.#v.type&&this.#v.html&&(this.#v.html=`<!DOCTYPE html><html><head><meta name="referrer" content="no-referrer"></head><body>${this.#v.html}</body></html>`),this.#T()}).catch(e=>{if(e&&this.#i.error(e),e&&this.#r&&!this.#A)return this.#i.debug("fetch call failed. Switch to adblck domain and path"),this.#A=!0,this.#s.enableAdbMode(),void this.show();this.#o(M)})}#T(){this.#i.debug("render"),this.#k.render(this.#v)}#C(e){let t=`${window.location.protocol}//${this.#m}/script/interstitial.php`;if(this.#r&&this.#s.isAdbMode()){const{adserverDomain:e}=this.#r,i=`/${T("abcdefgh0123456789")}`;t=`${window.location.protocol}//${e}${i}`}return t+=`?r=${this.#l}`,this.#f&&(t+="&rbd=1"),this.#w&&(t+=this.#w),t=t+"&atag=1"+`&czid=${this.#h}`+`&aggr=${this.#g}`+`&seqid=${e}`+`&ufp=${encodeURIComponent(this.#x)}`+`&srs=${this.#s.getSesionRandomString()}`+`&cbpage=${encodeURIComponent(o())}`+`&atv=${this.#S}`+`&cbref=${encodeURIComponent(l())}`,this.#r&&(t+="&abtg=1"),this.#u&&(t+="&ppv=1"),this.#b&&(t+=`&ab_test=${this.#b}`),!1===this.#p&&(t+="&cap=0"),this.#r&&this.#r.adbVersion&&(t+=`&adbv=${this.#r.adbVersion}`),this.#s.isSandboxed()&&(t+="&sbx=1"),this.#r&&this.#s.isAdbMode()?(t+="&sadbl=2",t+="&fmt=intrn",this.#i.debug(`bid url: ${t}`),E(t)):(this.#i.debug(`bid url: ${t}`),t)}};const Z="znid";class G{targetElementsCssSelector=null;shouldTriggerPopOnTargetClick=!1;constructor(e,t,i){this.targetElementsCssSelector=e,this.shouldTriggerPopOnTargetClick=t,this.zoneId=i}isPresent(){return!!this.targetElementsCssSelector}isActionAllowedOnElement(e){if(!this.isPresent())return!0;if(e.hasAttribute(Z))return e.getAttribute(Z)===this.zoneId;if(e.hasAttribute("doskip"))return!1;const t=Array.from(document.querySelectorAll('[doskip*="1"]'));for(const i of t)if(i.contains(e))return!1;return this.#E(e)?this.shouldTriggerPopOnTargetClick:!this.shouldTriggerPopOnTargetClick}#E(e){const t=document.querySelectorAll(this.targetElementsCssSelector);do{for(let i=0;i<t.length;i++)if(e===t[i])return!0}while(e=e.parentNode);return!1}}class Q{observer=null;iframesToOverlays=[];videosToOverlays=[];anchorsToOverlays=[];fullOverlay=null;overlaysResizeIntervalChecker=null;adUrl="";isTabSwap=!1;modifyBodyObserver=!0;#i;#l;#L=!1;constructor(e,t,i,n,o){this.elementTargeting=e,this.desktopClickListener=t,this.#i=i,this.#l=n,this.#L=o}setOverlaysResizeIntervalChecker(){this.overlaysResizeIntervalChecker=setInterval(()=>{const e=(e,t)=>{try{const i=t.getBoundingClientRect();e.style.top=`${i.top+window.scrollY}px`,e.style.left=`${i.left+window.scrollX}px`,e.style.width=`${i.width}px`,e.style.height=`${i.height}px`}catch(e){}};this.iframesToOverlays.forEach(({overlay:t,iframe:i})=>e(t,i)),this.videosToOverlays.forEach(({overlay:t,video:i})=>e(t,i)),this.anchorsToOverlays.forEach(({overlay:t,anchor:i})=>e(t,i))},500)}clearOverlaysResizeIntervalChecker(){try{clearInterval(this.overlaysResizeIntervalChecker)}catch(e){}}#O(e){const t=document.createElement("div");if(t.addEventListener("mousedown",e=>{this.#i.debug("mousedown on overlay"),e.stopPropagation(),e.preventDefault(),this.desktopClickListener(e)},this.#L),e===document.body)t.id="dontfoid",t.style.top="0px",t.style.left="0px",t.style.width=`${window.innerWidth||document.body.clientWidth}px`,t.style.height=`${window.innerHeight||document.body.clientHeight}px`,t.style.position="fixed";else{const i=e.getBoundingClientRect();t.style.top=`${i.top+window.scrollY}px`,t.style.left=`${i.left+window.scrollX}px`,t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,t.style.position="absolute",t.setAttribute("donto","")}return t.setAttribute(Z,this.#l),t.style.zIndex=2147483647,t.style.backgroundColor="transparent",e===document.body?document.body.appendChild(t):e.parentNode.appendChild(t),t}attachVideoOverlays(){const e=document.querySelectorAll("video");for(let t=0;t<e.length;t++)this.elementTargeting.isActionAllowedOnElement(e[t])&&this.videosToOverlays.push({video:e[t],overlay:this.#O(e[t])})}attachIframeOverlays(){const e=document.querySelectorAll("iframe");for(let t=0;t<e.length;t++)this.elementTargeting.isActionAllowedOnElement(e[t])&&this.iframesToOverlays.push({iframe:e[t],overlay:this.#O(e[t])})}attachAnchorOverlays(){const e=document.querySelectorAll("a");for(let t=0;t<e.length;t++)this.elementTargeting.isActionAllowedOnElement(e[t])&&this.anchorsToOverlays.push({anchor:e[t],overlay:this.#O(e[t])})}clearVideoOverlays(){for(let e=0;e<this.videosToOverlays.length;e++)this.videosToOverlays[e].overlay.parentNode.removeChild(this.videosToOverlays[e].overlay),this.videosToOverlays[e].overlay=null;this.videosToOverlays.length=0}clearAnchorOverlays(){for(let e=0;e<this.anchorsToOverlays.length;e++)this.anchorsToOverlays[e].overlay.parentNode.removeChild(this.anchorsToOverlays[e].overlay),this.anchorsToOverlays[e].overlay=null;this.anchorsToOverlays.length=0}clearIframeOverlays(){for(let e=0;e<this.iframesToOverlays.length;e++)this.iframesToOverlays[e].overlay.parentNode.removeChild(this.iframesToOverlays[e].overlay),this.iframesToOverlays[e].overlay=null;this.iframesToOverlays.length=0}}class K extends N{#s;#v=null;#t={};#$=!1;#z;#f=!1;#L=!0;#i;#S="70.0";#A=!1;#P=null;#y=12;constructor(t){super(),this.#i=new e(`atag_${t.collectiveZoneId}_suv5_${t.zoneId}`),this.#s=window[t.adcashGlobalName],this.#i.debug("init atag pop with config:",t),this.#t=t,this.elementTargeting=new G(this.#t.targetElementsCssSelector,this.#t.triggerOnTargetElementsClick,this.#t.zoneId),x&&(this.#i.debug("use capture -> false"),this.#L=!1),this.overlays=new Q(this.elementTargeting,this.#R.bind(this),this.#i,this.#t.zoneId,this.#L),t.tagVersionSuffix&&(this.#S+=t.tagVersionSuffix),this.#i.debug("tag version:",this.#S)}show(){this.#v=null,this.#z=null,this.#$=!1,fetch(this.#C()).then(e=>200===e.status||202===e.status?e.json():(204===e.status&&(this.hasNoInventory=!0,this.#i.debug(`no inventory! reset after ${this.#y} sec`),setTimeout(()=>{this.hasNoInventory=!1},1e3*this.#y),this.#y<7200&&(this.#y*=5)),Promise.reject())).then(z).then(e=>{if(this.#i.debug("response:",e),e.capped_ttl)return this.isCapped=!0,this.#i.debug(`capped! reset after ${e.capped_ttl} sec`),setTimeout(()=>{this.isCapped=!1},1e3*e.capped_ttl),void this.#t.actionCallback(B);if(this.#y>12&&(this.#y=12),!this.#f){this.#f=!0;const t=e.delay??0;return this.#i.debug("delay is",t),void setTimeout(()=>{this.#D(e)},1e3*t)}this.#D(e)}).catch(e=>{if(e&&this.#i.error(e),e&&this.#t.adblockSettings&&!this.#A)return this.#i.debug("fetch call failed. Switch to adblck domain and path"),this.#s.enableAdbMode(),this.#A=!0,void this.show();this.#t.actionCallback(B)})}#C(){let e=`${window.location.protocol}//${this.#t.adserverDomain}/script/suurl5.php`;if(this.#t.adblockSettings&&this.#s.isAdbMode()){const{adserverDomain:t}=this.#t.adblockSettings,i=`/${T("abcdefgh0123456789")}`;e=`${window.location.protocol}//${t}${i}`}if(e+=`?r=${this.#t.zoneId}`,this.#f&&(e+="&rbd=1"),this.#t.targetCountries){const t=this.#t.targetCountries.join(",");this.#t.triggerOnTargetCountries?e+="&allowed_countries="+encodeURIComponent(t):e+="&excluded_countries="+encodeURIComponent(t)}return e=e+this.#t.clientHintsQueryStr+"&atag=1&cbur="+Math.random()+"&cbiframe="+s()+"&cbWidth="+(window.innerWidth||document.body.clientWidth)+"&cbHeight="+(window.innerHeight||document.body.clientHeight)+"&cbtitle="+encodeURIComponent(d())+"&cbpage="+encodeURIComponent(o())+"&cbref="+encodeURIComponent(l())+"&cbdescription="+encodeURIComponent(c("description"))+"&cbkeywords="+encodeURIComponent(c("keywords"))+"&cbcdn="+encodeURIComponent(this.#s.getCdnDomain())+"&ts="+Date.now()+"&atv="+this.#S+"&ufp="+encodeURIComponent(this.#t.uniqueFingerprint)+"&srs="+this.#s.getSesionRandomString(),this.#t.adblockSettings&&(e+="&abtg=1"),this.#t.aggressivity&&(e+=`&aggr=${this.#t.aggressivity}`),this.#t.collectiveZoneId&&(e+=`&czid=${this.#t.collectiveZoneId}`),this.#t.recordPageView&&(e+="&ppv=1"),this.#t.abTest&&(e+=`&ab_test=${this.#t.abTest}`),!1===this.#t.adsCapping&&(e+="&cap=0"),this.#t.adblockSettings&&this.#t.adblockSettings.adbVersion&&(e+=`&adbv=${this.#t.adblockSettings.adbVersion}`),this.#s.isSandboxed()&&(e+="&sbx=1"),this.#t.adblockSettings&&this.#s.isAdbMode()?(e+="&sadbl=2",e+="&fmt=suv5",this.#i.debug(`bid url: ${e}`),E(e)):(this.#i.debug(`bid url: ${e}`),e)}#F(e){try{let t=this.#P?this.#P(""):window.open("");return t.document.open(),t.document.writeln('<meta name="referrer" content="no-referrer"><script type="text/javascript">window.location = "'+e+'";<\/script>'),t.document.close(),t}catch(e){return this.#i.error("window open failed:",e),null}}#N(){if("complete"===document.readyState&&void 0!==document.body){const e=document.createElement("iframe");return e.width="0",e.height="0",e.tabindex="-1",e.style="position:absolute;top:-1000px;left:-1000px;visibility:hidden;border:medium none;background-color:transparent;",document.body.appendChild(e),void(this.#P=e.contentWindow.open.bind(e.contentWindow))}setTimeout(this.#N.bind(this),50)}#D(e){this.#v={url:this.#M(e.url),impressionUrl:e.iurl,refreshRate:e.refreshRate,delay:e.delay,type:e.type},e.targetElementsCssSelector&&!this.elementTargeting.targetElementsCssSelector&&(this.elementTargeting.targetElementsCssSelector=e.targetElementsCssSelector,this.elementTargeting.shouldTriggerPopOnTargetClick=e.triggerOnTargetElementsClick),this.overlays.attachAnchorOverlays(),this.overlays.attachIframeOverlays(),this.overlays.attachVideoOverlays(),this.overlays.setOverlaysResizeIntervalChecker(),this.#B(),this.#i.debug("ready to show ad")}#H(){return"type"in this.#v&&"tabswap"===this.#v.type}#V(){this.#i.debug("do tabswap"),this.#t.actionCallback(H);const e=this.#v.url;this.#P?this.#z=this.#P(window.location.href,"_blank","noreferrer"):this.#z=window.open(window.location.href,"_blank","noreferrer"),this.#U().finally(()=>{setTimeout(()=>{const t=document.createElement("a");t.href=e,t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)},50)})}async#U(e=0){const t=this.#z?"1":"0";this.#i.debug("window opened:",t);let i=this.#v.impressionUrl+`&wo=${t}`;if(window["utsid-send"]&&(i+=`&utsid=${window["utsid-send"]}`),e>0&&(this.#i.debug(`retry impression. Attempt ${e}`),i+=`&rtry=${e}`),i=i+this.#t.clientHintsQueryStr+"&cbpage="+encodeURIComponent(o())+"&cbref="+encodeURIComponent(l()),this.#i.debug("send impression. url:",i),O){this.#i.debug("keepalive supported!");let t=null,n=!1;try{t=await fetch(i,{keepalive:!0})}catch(e){if(this.#i.error(e),this.#t.adblockSettings&&!this.#s.isAdbMode())return this.#i.debug("imp failed: try alt domain and path"),void this.#s.enableAdbMode();n=!0}if(t&&!t.ok||n)return void(e<2&&(await this.#U(e+1),document.dispatchEvent(new CustomEvent("impression-retry-event"))))}else navigator.sendBeacon?(this.#i.debug("keepalive NOT supported! use sendBeacon"),navigator.sendBeacon(i)):(this.#i.debug("keepalive NOT supported! use image.src"),(new Image).src=i);document.dispatchEvent(new CustomEvent("impression-event"))}#W(){this.overlays.clearOverlaysResizeIntervalChecker(),this.overlays.clearAnchorOverlays(),this.overlays.clearIframeOverlays(),this.overlays.clearVideoOverlays(),this.#v=null,this.#q(),this.#s.isShowingPop=!1,this.#t.actionCallback(B)}#R(e){this.#i.debug(`showAdClickListener triggered by event type ${e.type} on ${e.target.tagName}`),e.isTrusted?this.#v?this.#$?this.#i.debug(`${e.type} on ${e.target.tagName}:pop rejected: current pop is locked`):this.#s.isShowingPop?this.#i.debug(`${e.type} on ${e.target.tagName}: pop rejected: another pop is being currently shown`):this.elementTargeting.isActionAllowedOnElement(e.target)?(this.#s.isShowingPop=!0,this.#$=!0,this.#i.debug("triggering pop"),this.#H()?this.#V():(this.#P?this.#z=this.#P(this.#v.url,"_blank","noopener,noreferrer"):this.#z=window.open(this.#v.url,"_blank","noopener,noreferrer"),this.#U().finally(()=>{this.#W()}))):this.#i.debug(`${e.type} on ${e.target.tagName}: pop rejected: action not allowed on element`,e.target):this.#i.debug(`${e.type} on ${e.target.tagName}: pop rejected: current pop has no ad loaded`):this.#i.debug(`${e.type} on ${e.target.tagName}: pop rejected: event is not trusted`)}#M(e){let t=e;return g&&b<59||u&&b<56?t='data:text/html;charset=utf-8, <html><meta http-equiv="refresh" content="0;URL='+e+'"></html>':w&&g&&!h&&b>63&&(e="googlechrome://"+e.replace(/(^\w+:|^)\/\//,"")),t}#B(){const e={zoneId:this.#t.zoneId,callback:this.#R.bind(this)};x&&C&&(this.#i.debug("subscribe to scroll"),this.#s.subscribe("scroll",e)),x||(this.#i.debug("subscribe to mousedown"),this.#s.subscribe("mousedown",e,this.#L)),this.#i.debug("subscribe to click"),this.#s.subscribe("click",e,this.#L)}#q(){x&&C&&(this.#i.debug("unsubscribe from scroll"),this.#s.unsubscribe("scroll",this.#t.zoneId)),x||(this.#i.debug("unsubscribe from mousedown"),this.#s.unsubscribe("mousedown",this.#t.zoneId,this.#L)),this.#i.debug("unsubscribe from click"),this.#s.unsubscribe("click",this.#t.zoneId,this.#L)}}class J{constructor(e){this.key=e}isStatePresent(){return null!==window.localStorage.getItem(this.key)}getState(){return JSON.parse(window.localStorage.getItem(this.key))}setState(e){window.localStorage.setItem(this.key,JSON.stringify(e))}removeState(){window.localStorage.removeItem(this.key)}}class X{#i;#s;#_=null;#j=null;#h;#Z=[];#G=0;#Q=null;#K=1;#J=0;#X=!1;constructor(t){const{adcashGlobalName:i,collectiveZoneConfig:n,adserverDomain:o,adblockSettings:s,clientHintsQueryStr:r,tagVersionSuffix:a,isLoadedAsPartOfLibrary:d,uniqueFingerprint:l}=t,{collectiveZoneId:c}=n;this.#i=new e(`atag_${c}`),this.#s=window[t.adcashGlobalName],this.#Z=n.rotationList,this.#i.debug("init autotag with config:",t);const h=n.indexedFormats;let g=!0;for(const e in h){const t=h[e];switch(e){case"ippg":this.#s.runInPagePush({zoneId:t.zoneId.toString(),refreshRate:t.rr,delay:t.d,maxAds:t.mads,renderPosDesktop:t["render-pos-desktop"],renderPosMobile:t["render-pos-mobile"],offsetTop:t["offset-top"],isAutoTag:!0,collectiveZoneId:c,aggressivity:n.aggressivity,abTest:n.ab_test,recordPageView:g,tagVersionSuffix:a});break;case"suv4":case"pop":this.#j=new K({zoneId:t.zoneId.toString(),targetElementsCssSelector:t["element-list"],triggerOnTargetElementsClick:"allow"===t["element-action"],targetCountries:t["country-list"],triggerOnTargetCountries:"allow"===t["country-action"],adblockSettings:s,adserverDomain:o,adcashGlobalName:i,clientHintsQueryStr:r,collectiveZoneId:c,aggressivity:n.aggressivity,adsCapping:n.adsCapping,abTest:n.ab_test,recordPageView:g,actionCallback:this.actionCallback.bind(this),tagVersionSuffix:a,isLoadedAsPartOfLibrary:d,uniqueFingerprint:l});break;case"interstitial":this.#_=new j({zoneId:t.zoneId,isFullscreen:0===t.overlay,adblockSettings:s,adserverDomain:o,adcashGlobalName:i,clientHintsQueryStr:r,collectiveZoneId:c,aggressivity:n.aggressivity,adsCapping:n.adsCapping,abTest:n.ab_test,recordPageView:g,actionCallback:this.actionCallback.bind(this),tagVersionSuffix:a,isLoadedAsPartOfLibrary:d,uniqueFingerprint:l});break;default:this.#i.error(`ad format type not recognised from collective zone config. adformat.type: ${e}; czid: ${czid}`)}}this.localStorageService=new J(`atg_${c}`);const u=this.localStorageService.getState();u&&u.adbExpiresAt>Date.now()&&this.#s.enableAdbMode(),u&&u.expiresAt>Date.now()?(this.#i.debug("previous session present:",u),this.#K=u.shownAdsCounter,this.#J=u.iterationCounter,this.#G=u.currentAdIndex,u.isInterstitialBeingShown?this.#Y():(this.#Q=this.#Z[this.#G],this.#ee())):(this.#Q=this.#Z[this.#G],this.#ee())}actionCallback(e){this.#i.debug("ACTION CALLBACK type:",e),e===M?this.#X=!1:this.#K++;const t=this.#Q.rotationInterval;this.#te(),this.#ie(),e===H?this.#i.debug("tabswap, move to next and store session"):(this.#i.debug(`show next ad after ${t} sec`),setTimeout(this.#ee.bind(this),1e3*t))}#ie(){const e={shownAdsCounter:this.#K,iterationCounter:this.#J,currentAdIndex:this.#G,isInterstitialBeingShown:this.#X,expiresAt:Date.now()+6e5,adbExpiresAt:this.#s.isAdbMode()?Date.now()+6e5:0};this.#i.debug("store session state",e),this.localStorageService.setState(e)}#ne(){if(!this.#Q.apply)return!1;switch(this.#Q.apply){case"1st":return!(0===this.#J);case"odd":return!(this.#J%2==1);case"even":return!(this.#J%2==0);default:return!1}}#te(){this.#G===this.#Z.length-1?(this.#G=0,this.#J++):this.#G++,this.#Q=this.#Z[this.#G],this.#i.debug("set current ad to next on list. current ad is set to:",this.#Q)}#Y(){this.#i.debug("show next ad"),this.#te(),this.#ie(),this.#ee()}#ee(){if(this.#ne())return this.#i.debug(`skipping ad at index: ${this.#G} due to apply rule`),void this.#Y();switch(this.#Q.type){case"interstitial":if(this.#_.isCapped||this.#_.hasNoInventory)return void setTimeout(this.#Y.bind(this),1e3);this.#i.debug("showing interstitial"),this.#_.show(this.#K),this.#X=!0,this.#K++,this.#ie();break;case"pop":if(this.#j.isCapped||this.#j.hasNoInventory)return void setTimeout(this.#Y.bind(this),1e3);this.#i.debug("showing pop"),this.#j.show(this.#K);break;default:throw Error(`rotation list element type '${this.#Q.type}' not recognised`)}}}const Y=()=>Math.round((new Date).getTime()/1e3),ee=t=>{const i=new e("user_engagement"),l="utsid-send";let h,g=0,u=!1,p=!1,b={clientHints:{},isScrollable:0,totalClicks:0,sessionLength:0,ippMissclicks:0,visible:0,caught:0,lastevent:0,isFullscreen:0,isTabFocused:0,eventImps:0,retryCounts:0,isScrolled:0,isMouseMoved:0,pagePercentageSeen:0,belowTheFoldSeen:0,touchEnd:0,touchMove:0,clicksByType:{idle:0,input:0,video:0,button:0,link:0,img:0},browsingTopics:[],ufp:L()},m=a(),w=Y();function f(){var e,n;0===b.isFullscreen&&(b.isFullscreen=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement?1:0),b.isTabFocused=document.hidden||document.mozHidden||document.webkitHidden?0:1,b.sessionStartTime=w,b.sessionId=m,b.sessionLength=Y()-w,b.timeZoneOffset=(new Date).getTimezoneOffset(),b.zones=[],t&&(b.zones=t.getZoneIds()),b.pUrl=encodeURIComponent(o()),b.pReferrer=encodeURIComponent((()=>{const e=document.referrer;return e?r(e):""})()),b.pTitle=encodeURI(d()),b.pDescription=encodeURIComponent(c("description",i)),b.pKeywords=encodeURIComponent(c("keywords",i)),b.pHasIframes=(()=>{const e=document.getElementsByTagName("iframe");return e.length?e.length:0})(),b.pWidth=Math.ceil(window.scrollWidth||document.body.scrollWidth),b.pHeight=Math.ceil(window.scrollHeight||document.body.scrollHeight),b.vWidth=Math.ceil(window.innerWidth||document.body.clientWidth),b.vHeight=Math.ceil(window.innerHeight||document.body.clientHeight),b.inIframe=s(),sessionStorage.getItem("template")&&(b.ippTemplate=sessionStorage.getItem("template")),b.visible=(e=b.vWidth,n=b.vHeight,s()&&(e<10||n<10)?0:1),b.caught=(()=>{let e=0;if(s())try{window.top.location.href}catch(t){e=1}return e})(),b.isScrollable=((e,t)=>{if(e>t){const i=.05;return e-t>Math.ceil(t*i)?1:0}return 0})(b.pHeight,b.vHeight)}function v(){i.debug("Touch move detected."),b.touchMove++,p=!0}function y(){1!==b.isMouseMoved&&(i.debug("Mouse move tracked"),b.isMouseMoved=1,p=!0)}function S(){i.debug("Touch end detected."),b.touchEnd++,p=!0,k()}function k(){if(i.debug("checkScrolling()"),b.pHeight<=b.vHeight)return b.pagePercentageSeen=100,void(b.belowTheFoldSeen=100);var e=Math.ceil(window.scrollTop||document.body.scrollTop),t=Math.ceil((e+b.vHeight)/b.pHeight*100);t>100&&(t=100),t!=b.pagePercentageSeen&&(i.debug("Scroll event detected."),b.isScrolled=1,p=!0),t>b.pagePercentageSeen&&(i.debug("Page percentage seen updated."),b.pagePercentageSeen=t,p=!0);var n=Math.ceil(e/(b.pHeight-b.vHeight)*100);n>100&&(n=100),n>b.belowTheFoldSeen&&(i.debug("Bellow the fold percentage seen updated."),b.belowTheFoldSeen=n,p=!0)}function A(){b.ippMissclicks++,p=!0}function I(e){i.debug("Click tracked"),b.totalClicks++;var t=e.target,n=null;do{null!==n&&""!==n||(n=x(t)),t=t.parentElement}while(t&&"body"!==t.nodeName.toLowerCase()&&"document"!==t.nodeName.toLowerCase());null===n&&(n="idle"),b.clicksByType[n]++,p=!0}function x(e){var t=null;return-1!==["a","video","button","input","textarea","img","select"].indexOf(e.nodeName.toLowerCase())&&("a"===(t=e.nodeName.toLowerCase())?t="link":"textarea"!==t&&"select"!==t||(t="input")),t}function C(){i.debug("Impression tracked"),b.eventImps++}function T(){i.debug("Retry tracked!"),b.retryCounts++}function E(){var e="//usrpubtrk.com/ut/hb.php?cb="+Math.random();return e+="&v=1",i.debug("Target Url: "+e.toString()),e}function O(e=!1){if(!u){if(u=!0,f(),e&&(b.lastevent=1),i.isDebugEnabled&&i.debug("send payload:",JSON.parse(JSON.stringify(b))),"navigator"in window&&"sendBeacon"in window.navigator&&void 0!==navigator.sendBeacon&&void 0!==Blob){b.sentTimestamp=Date.now();var t=new Blob([JSON.stringify(b)],{type:"text/plain; charset=UTF-8"});navigator.sendBeacon(E(),t)}else{var n="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("POST",E(),!0),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8");try{b.sentTimestamp=Date.now(),n.send(JSON.stringify(b))}catch(e){}}b.lastevent=0,u=!1}}function $(){i.debug("visibility state is",document.visibilityState),"hidden"===document.visibilityState&&p?(clearInterval(h),O(),p=!1):"visible"===document.visibilityState&&(h=setInterval(P,6e4))}function z(){var e=new CustomEvent(l,{detail:{issued:"UT",data:{utsid:m}}});document.dispatchEvent(e)}function P(){if(b.sessionLength=Y()-w,b.sessionLength>=7200)return i.debug("Session limit reached! Send last payload and tear down"),O(),clearInterval(h),i.debug("detaching behavior listeners"),document.removeEventListener("click",I,!1),document.removeEventListener("mousemove",y,!1),document.removeEventListener("scroll",k,!1),document.removeEventListener("in-page-missclick",A,!1),document.removeEventListener("impression-event",C,!1),document.removeEventListener("impression-retry-event",T,!1),document.removeEventListener("touchend",S,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("touchcancel",k,!1),document.removeEventListener("visibilitychange",$),void window.removeEventListener("beforeunload",O);0!==g&&1!==g&&5!==g&&10!==g&&g%30!=0||O(),g++}!async function e(){if("complete"===document.readyState||"interactive"===document.readyState)return b.clientHints=await n(i,true),b.browsingTopics=await async function(){let e=[];if("browsingTopics"in document&&document.featurePolicy.allowsFeature("browsing-topics"))try{e=await document.browsingTopics(),i.debug("document.browsingTopics() return value:",e)}catch(e){i.debug("Error calling document.browsingTopics(): ",e)}return e}(),"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?(document.addEventListener("touchend",S,!1),document.addEventListener("touchmove",v,!1),document.addEventListener("touchcancel",k,!1)):(document.addEventListener("mousemove",y,!1),document.addEventListener("scroll",k,!1)),document.addEventListener("click",I,!1),document.addEventListener("impression-event",C,!1),document.addEventListener("impression-retry-event",T,!1),document.addEventListener("in-page-missclick",A,!1),f(),k(),0===g&&P(),h=setInterval(P,6e4),window[l]=m,z(),setTimeout(z,2e4),document.addEventListener("visibilitychange",$),void window.addEventListener("beforeunload",()=>{O(!0)});setTimeout(e,100)}()},te="sandboxedDetector";class ie{#i;#oe;#se;#re=!1;#ae=!1;#de=!1;constructor(e,t,i){this.#i=e,this.#oe=t,this.#se=i}isSandboxed(){return this.#ae}load(){if(this.#re)return void this.#i.debug("already checked");if(this.#re=!0,this.#i.debug("load sandbox detector"),!s())return void this.#i.debug("not in iframe. exit");this.#i.debug("iframe detected");const e=this.#se.getState();if(e&&e.expiresAt>Date.now())return this.#i.debug("previous state present. Expires at:",new Date(e.expiresAt)),e.isSandboxed?(this.#i.debug("sandboxed recently! show overlay"),void(this.#ae=!0)):void this.#i.debug("not sandboxed recently. dont check further");this.#i.debug("attach detector listener to events");const t={zoneId:te,callback:this.#le.bind(this)};x||this.#oe.subscribe("mousedown",t,!0),this.#oe.subscribe("click",t,!0)}#le(e){if(!e.isTrusted)return void this.#i.debug(`${e.type} on ${e.target.tagName}. Detector skipped: event is not trusted`,e);if(this.#oe.isShowingPop)return void this.#i.debug("detector skipped: pop being currently shown");this.#oe.isShowingPop=!0,this.#i.debug("detector taking action. prevent other pops from showing");let t=null;try{t=window.open("about:blank","_blank")}catch(e){this.#i.error("detector error",e)}t&&t.close(),null===t&&(this.#i.debug("sandbox detected"),this.#ae=!0),this.#se.setState({expiresAt:Date.now()+36e5,isSandboxed:this.#ae}),x||this.#oe.unsubscribe("mousedown",te,!0),this.#oe.unsubscribe("click",te,!0),setTimeout(()=>{this.#oe.isShowingPop=!1},300)}showSandboxWarningOverlay(){this.#de||(this.#de=!0,this.#i.debug("show sandbox warning overlay"),this.#ce())}#he(){const e=document.createElement("div");e.id="sbxwo",Object.assign(e.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#fff",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:"20px",boxSizing:"border-box",textAlign:"center"});const t=document.createElement("div");t.innerHTML="\n    <h2>Ad Functionality Blocked</h2>\n    <p>\n      It looks like your page is running in a sandbox that blocks certain functionality.\n      This setting is preventing our ads from working properly.\n      Please disable the sandbox restrictions or adjust your settings.\n    </p>\n  ",t.style.maxWidth="600px";const i=document.createElement("button");i.textContent="Dismiss",Object.assign(i.style,{marginTop:"20px",padding:"10px 20px",fontSize:"16px",cursor:"pointer"}),i.addEventListener("click",()=>{e.remove()}),t.appendChild(i),e.appendChild(t),document.body.appendChild(e)}#ce(){const e=document.createElement("div");e.id="sbxwo",Object.assign(e.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"black",color:"black",zIndex:2147483647,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontFamily:"sans-serif"});const t=document.createElement("div");Object.assign(t.style,{backgroundColor:"white",padding:"30px 40px",borderRadius:"16px",maxWidth:"90%",boxSizing:"border-box"}),t.innerHTML='\n    <h2 style="margin: 0 0 20px; font-size: 24px;">Notice for webmaster</h2>\n    <p style="font-size: 18px; margin: 0;">\n      To continue playing please remove Sandbox from iframe tab or add "allow-popups" to Sandbox\n    </p>\n  ',e.appendChild(t),document.body.appendChild(e)}}const ne="x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF",oe="ZpQw9XkLmN8c3vR3",se="adblock-settings",re=(()=>{let e=document.currentScript;return e||(e=document.getElementById("aclib")),e||(e=document.getElementById("adcash-lib")),e})();let ae=null;class de{#ge;#ue={pop:!1,autoTag:!1,inPagePush:!1,interstitial:!1,videoSlider:!1};#pe;#w;#be=new Set;#me=new Set;#i;#we=!1;#fe=!1;#ve;#m="adexchangeclear.com";#S="70.0";#r=null;#ye="aclib";#Se;#ke=!1;isShowingPop=!1;#x;#Ae=!1;#Ie={};#xe;constructor(t={}){if(ae)return ae;ae=this;let i="aclib";if(t.classes&&(this.#Ie=t.classes,i="aclib_adbl"),this.#i=new e(i),this.#ve=(e=>{const t={mousedown:[],click:[],touchstart:[]},i={mousedown:[],scroll:[],click:[],touchstart:[]},n=i=>{const n=i.currentTarget===window?"win":"doc";e.debug(`${n} mousedown with capture: in`),t.mousedown.forEach(t=>{e.debug(`${n} mousedown with capture: calling observer`),t.callback(i)})},o=t=>{const n=t.currentTarget===window?"win":"doc";e.debug(`${n} mousedown: in`),i.mousedown.forEach(i=>{e.debug(`${n} mousedown: calling observer`),i.callback(t)})},s=i=>{const n=i.currentTarget===window?"win":"doc";e.debug(`${n} click with capture: in`),t.click.forEach(t=>{e.debug(`${n} click with capture: calling observer`),t.callback(i)})},r=t=>{const n=t.currentTarget===window?"win":"doc";e.debug(`${n} click: in`),i.click.forEach(i=>{e.debug(`${n} click: calling observer`),i.callback(t)})},a=e=>{i.scroll.forEach(t=>{t.callback(e)})};return{subscribe:(e,n,o)=>{if(!t[e]||!i[e])throw new Error(`${e} is not observable!`);o?t[e].push(n):i[e].push(n)},unsubscribe:(e,n,o)=>{if(!t[e]||!i[e])throw new Error(`${e} is not observable!`);if(o)for(let i=0;i<t[e].length;i++)t[e][i].zoneId===n&&t[e].splice(i,1);else for(let t=0;t<i[e].length;t++)i[e][t].zoneId===n&&i[e].splice(t,1)},attachListeners:()=>{window.addEventListener("mousedown",n,!0),window.addEventListener("mousedown",o,!1),window.addEventListener("click",s,!0),window.addEventListener("click",r,!1),document.addEventListener("mousedown",n,!0),document.addEventListener("mousedown",o),document.addEventListener("click",s,!0),document.addEventListener("click",r),window.addEventListener("scroll",a)},detachListeners:()=>{window.removeEventListener("mousedown",n,!0),window.removeEventListener("mousedown",o,!1),window.removeEventListener("click",s,!0),window.removeEventListener("click",r,!1),document.removeEventListener("mousedown",n,!0),document.removeEventListener("mousedown",o),document.removeEventListener("click",s,!0),document.removeEventListener("click",r),window.removeEventListener("scroll",a)}}})(this.#i),this.#ve.attachListeners(),this.getClientHints(),this.#Se=a(),this.#x=L(),this.#xe=new ie(new e("sd"),ae,new J("sndbxchckiborjforqp2")),this.#i.debug("init adcash lib. listeners attached. ready to publish"),this.#i.debug("is mobile device:",x),window[ne]&&(this.#r=JSON.parse(JSON.stringify(window[ne])),this.#ge=this.#r.cdnDomain,delete window[ne]),window[oe]&&(this.#r=JSON.parse(((e,t="xR9tB2pL6q7MwVe")=>[...atob(e)].map((e,i)=>String.fromCharCode(e.charCodeAt(0)^t.charCodeAt(i%t.length))).join(""))(window[oe])),this.#ge=this.#r.cdnDomain,delete window[oe]),this.#r||(this.#ge=new URL(re.src).host,re.hasAttribute(se)&&(this.#r=JSON.parse(re.getAttribute(se)),re.removeAttribute(se))),this.#r&&this.#i.debug("adblock settings:",this.#r),re.getAttribute("data-preview"))return this.#i.debug("preview mode"),void(this.#Ae=!0);this.#Ce(),this.#Te(),this.#Ee(),this.#xe.load()}isSandboxed(){return this.#xe.isSandboxed()}showSandboxWarningOverlay(){this.#xe.showSandboxWarningOverlay()}async getClientHints(e){if(void 0===this.#pe){this.#pe=await n(this.#i,!0);let e="";for(const t in this.#pe)e+=`&${t}=${this.#pe[t]}`;this.#w=e}return e?this.#pe:this.#w}getCdnDomain(){return this.#ge}getSesionRandomString(){return this.#Se}enableAdbMode(){this.#i.debug("enable adb mode"),this.#ke=!0}isAdbMode(){return this.#ke}subscribe(e,t,i){this.#ve.subscribe(e,t,i)}unsubscribe(e,t,i){this.#ve.unsubscribe(e,t,i)}#Ee(){if(document.body){const e=document.createElement("a");e.style.display="none",e.style.visibility="hidden",e.style.position="relative",e.style.left="-1000px",e.style.top="-1000px";let t=this.#m;return this.#r&&(t=this.#r.adserverDomain),e.href=`${location.protocol}//${t}/ad/visit.php?al=1`,void document.body.appendChild(e)}setTimeout(this.#Ee.bind(this),100)}#Te(){ee(ae)}#Ce(){if(document.head){let e=new Set([this.#ge,this.#m]);return this.#r&&e.add(this.#r.adserverDomain),e=Array.from(e),this.#i.debug("prefetch domains:",e),void e.forEach(e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=`//${e}`,document.head.appendChild(t)})}setTimeout(this.#Ce.bind(this),100)}getZoneIds(){return Array.from(this.#be)}runPop(e){const{zoneId:t,delay:i,targetElementsCssSelector:n,triggerOnTargetElementsClick:o,targetCountries:s,triggerOnTargetCountries:r,sub1:a,sub2:d,publisherUrl:l,storeUrl:c,c1:h,c2:g,c3:u,pubHash:p,pubClickId:b,pubValue:m,fallbackOn:w,isAutoTag:f,collectiveZoneId:v,aggressivity:y,recordPageView:S,linkedZoneId:k,abTest:A,tagVersionSuffix:I}=e;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");if(void 0!==i&&(!R(i)||i<0))throw new Error("delay is not an integer or is less than zero");if(void 0!==n){if(!D(n))throw new Error("targetElementsCssSelector is not a string");if(!(e=>{try{document.createDocumentFragment().querySelector(e)}catch{return!1}return!0})(n))throw new Error("targetElementsCssSelector is not a valid css selector");if(!P(o))throw new Error("triggerOnTargetElementsClick is not a boolean")}if(void 0!==s){if(!(e=>{if(!Array.isArray(e))return!1;if(0===e.length)return!1;for(let t=0;t<e.length;t++)if("string"!=typeof e[t]||!/^[A-Z]{2}$/.test(e[t]))return!1;return!0})(s))throw new Error("targetCountries is not valid");if(!P(r))throw new Error("triggerOnTargetCountries is not a boolean")}if(this.#me.has(t))return void this.#i.error(`zoneId ${t} already loaded`);this.#me.add(t);const x={adcashGlobalName:this.#ye,zoneId:t,windowOpenTimeout:100,delay:i,targetElementsCssSelector:n,triggerOnTargetElementsClick:o,targetCountries:s,triggerOnTargetCountries:r,adserverDomain:this.#m,adblockSettings:this.#r,uniqueFingerprint:this.#x,sub1:a,sub2:d,publisherUrl:l,storeUrl:c,c1:h,c2:g,c3:u,pubHash:p,pubClickId:b,pubValue:m,fallbackOn:w,isAutoTag:f,collectiveZoneId:v,aggressivity:y,recordPageView:S,linkedZoneId:k,abTest:A,tagVersionSuffix:I};if(this.#Ie.PopUnder)return x.isLoadedAsPartOfLibrary=!0,void new this.#Ie.PopUnder(x);if(this.#ue.pop||this.#we){if(window.PopUnder)return this.#be.add(x.zoneId),void new PopUnder(x);const e=setInterval(()=>{window.PopUnder&&(this.#be.add(x.zoneId),new PopUnder(x),clearInterval(e))},100)}else{this.#i.debug("loading suv5 script on page"),this.#we=!0;const e=document.createElement("script");e.type="text/javascript",e.src=`${location.protocol}//${this.#ge}/script/suv5.js`,e.onload=()=>{this.#ue.pop=!0,this.#we=!1,f?this.#be.add(v):this.#be.add(x.zoneId),new PopUnder(x)},e.onerror=()=>{this.#ue.pop=!1,this.#we=!1,this.#i.error(`failed loading ${e.src}`)},document.head.appendChild(e)}}runInPagePush(e){if(this.#ue.inPagePush)return void this.#i.error("in-page push zone already loaded on page");this.#ue.inPagePush=!0;const{zoneId:t,delay:i,maxAds:n,renderPosDesktop:o,renderPosMobile:s,offsetTop:r,sub1:a,isAutoTag:d,collectiveZoneId:l,linkedZoneId:c,aggressivity:h,recordPageView:g,abTest:u,tagVersionSuffix:p}=e;let{refreshRate:b}=e;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");if(void 0!==b&&(!R(b)||b<0))throw new Error("refreshRate is not an integer or is less than zero");if(void 0!==i&&(!R(i)||i<0))throw new Error("delay is not an integer or is less than zero");if(void 0!==n&&(!R(n)||n<1))throw new Error("maxAds is not an integer or is less than one");if(void 0!==o&&!F(o))throw new Error("renderPosDesktop is not valid");if(void 0!==s&&!F(s))throw new Error("renderPosMobile is not valid");if(void 0!==r&&(!R(r)||r<0))throw new Error("offsetTop is not an integer or is less than zero");this.#i.debug("loading in-page push on page"),d?this.#be.add(l):this.#be.add(t),void 0!==b&&b>0&&b<10&&(b<5?b*=60:b=30),this.#i.debug("ipp rr set to",b);const m={zoneId:t,refreshRate:b??60,delay:i??0,maxAds:n??1,renderPosDesktop:o??"top",renderPosMobile:s??"top",offsetTop:r??0,sub1:a,isAutoTag:d,collectiveZoneId:l,linkedZoneId:c,aggressivity:h,recordPageView:g,abTest:u,tagVersionSuffix:p,adserverDomain:this.#m,adblockSettings:this.#r,adcashGlobalName:this.#ye,isLoadedAsPartOfLibrary:!1,uniqueFingerprint:this.#x};if(this.#Ie.InPagePush)return m.isLoadedAsPartOfLibrary=!0,void new this.#Ie.InPagePush(m);if(window.InPagePush)new window.InPagePush(m);else{const e=document.createElement("script");e.type="text/javascript",e.src=`${window.location.protocol}//${this.#ge}/script/inpagepush.js`,e.setAttribute("nipp","1"),e.onload=()=>{new window.InPagePush(m)},e.onerror=()=>{this.#i.error(`failed loading ${e.src}`)},document.head.appendChild(e)}}runBanner(e){const{zoneId:t,width:i,height:n,renderIn:o,sub1:s,currentScript:r}=e;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");if(void 0!==i&&!R(i))throw new Error("Banner width is not an integer");if(void 0!==n&&!R(n))throw new Error("Banner height is not an integer");let a;this.#i.debug("loading banner on page",t),o||(document.currentScript&&document.currentScript.parentElement&&(a=document.currentScript.parentElement),r&&(a=r.parentElement));const d={zoneId:t,width:i,height:n,renderIn:o,currentElement:a,sub1:s,adcashGlobalName:this.#ye,uniqueFingerprint:this.#x,adblockSettings:this.#r};if(this.#Ie.Banner)new this.#Ie.Banner(d);else if(this.#ue.banner||this.#fe){if(window.Banner)return this.#be.add(d.zoneId),void new Banner(d);const e=setInterval(()=>{window.Banner&&(this.#be.add(d.zoneId),new Banner(d),clearInterval(e))},100)}else{this.#fe=!0;const e=document.createElement("script");e.type="text/javascript",e.src=`${location.protocol}//${this.#ge}/script/banner.js`,e.onload=()=>{this.#ue.banner=!0,this.#fe=!1,this.#be.add(d.zoneId),new Banner(d)},e.onerror=()=>{this.#ue.banner=!1,this.#fe=!1,this.#i.error(`failed loading ${e.src}`)},e.setAttribute("data-adel","ban"),e.setAttribute("a-lib","1"),document.head.appendChild(e)}}runInterstitial(e){if(this.#ue.interstitial)return void this.#i.error("interstitial zone already loaded on page");this.#ue.interstitial=!0;const{zoneId:t,sub1:i,isAutoTag:n,collectiveZoneId:o,linkedZoneId:s,aggressivity:r,recordPageView:a,abTest:d,tagVersionSuffix:l}=e;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");this.#i.debug("loading interstitial on page");const c={zoneId:t,sub1:i,isAutoTag:n,collectiveZoneId:o,linkedZoneId:s,aggressivity:r,recordPageView:a,abTest:d,tagVersionSuffix:l,adcashGlobalName:this.#ye,adserverDomain:this.#m,adblockSettings:this.#r,uniqueFingerprint:this.#x,isLoadedAsPartOfLibrary:!1};if(this.#be.add(t),this.#Ie.Interstitial)return c.isLoadedAsPartOfLibrary=!0,void new this.#Ie.Interstitial(c);if(window.Interstitial)new Interstitial(c);else{const e=document.createElement("script");e.type="text/javascript",e.src=`${location.protocol}//${this.#ge}/script/interstitial.js`,e.setAttribute("a-lib","1"),e.onload=()=>{new Interstitial(c)},e.onerror=()=>{this.#i.error(`failed loading ${e.src}`)},document.head.appendChild(e)}}async#Le(e,t=!0){this.#i.debug("fetch collective zone config");let i=`${window.location.protocol}//${this.#m}/ad/czcf.php`;if(this.isAdbMode()){const e=`/${T("abcdefgh0123456789")}`;i=`${window.location.protocol}//${this.#r.adserverDomain}${e}`}i+=`?cz=${e}`,i+=`&atv=${this.#S}`;const n=await this.getClientHints();let o;n&&(i+=n),this.isAdbMode()&&(i+="&sadbl=2",i+="&fmt=atg",i=E(i)),this.#i.debug("collective zone config url: ",i);try{o=await fetch(i)}catch(i){return this.#i.error(i),this.#r&&t?(this.#i.debug("collective zone config fetch failed: try alt domain and path"),this.enableAdbMode(),this.#Le(e,!1)):null}return 200!==o.status?null:(o=await o.json(),z(o))}async runAutoTag(e){if(this.#ue.autoTag)return void this.#i.error("autotag zone already loaded on page");this.#ue.autoTag=!0;const t=e.zoneId;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");const i=await this.#Le(t);if(!i)return void this.#i.error(`failed to fetch collective zone config! czid: ${t}`);if(this.#i.debug("collective zone config:",i),!i.rotationList){this.#i.debug("running in NORMAL MODE (no rotation)");const n=i.indexedFormats;let o=!0;for(const s in n){switch(s){case"suv4":case"pop":this.runPop({zoneId:n[s].zoneId.toString(),targetElementsCssSelector:n[s]["element-list"],triggerOnTargetElementsClick:"allow"===n[s]["element-action"],targetCountries:n[s]["country-list"],triggerOnTargetCountries:"allow"===n[s]["country-action"],isAutoTag:!0,collectiveZoneId:t,aggressivity:i.aggressivity,abTest:i.ab_test,recordPageView:o,tagVersionSuffix:e.tagVersionSuffix});break;case"interstitial":this.runInterstitial({zoneId:n[s].zoneId.toString(),isAutoTag:!0,collectiveZoneId:t,aggressivity:i.aggressivity,abTest:i.ab_test,recordPageView:o,tagVersionSuffix:e.tagVersionSuffix});break;case"ippg":this.runInPagePush({zoneId:n[s].zoneId.toString(),refreshRate:n[s].rr,delay:n[s].d,maxAds:n[s].mads,renderPosDesktop:n[s]["render-pos-desktop"],renderPosMobile:n[s]["render-pos-mobile"],offsetTop:n[s]["offset-top"],isAutoTag:!0,collectiveZoneId:t,aggressivity:i.aggressivity,abTest:i.ab_test,recordPageView:o,tagVersionSuffix:e.tagVersionSuffix});break;default:this.#i.error(`ad format type not recognised from collective zone config. adformat.type: ${s}; czid: ${t}`)}o=!1}return}this.#i.debug("running in ROTATION MODE (rotation present)");const n={adcashGlobalName:this.#ye,collectiveZoneConfig:i,adserverDomain:this.#m,adblockSettings:this.#r,clientHintsQueryStr:this.#w,tagVersionSuffix:e.tagVersionSuffix,isLoadedAsPartOfLibrary:!1,uniqueFingerprint:this.#x};if(this.#Ie.AutoTagRotation)return this.#be.add(t),n.isLoadedAsPartOfLibrary=!0,void new this.#Ie.AutoTagRotation(n);this.#i.debug("loading autotag rotation script on page");const o=document.createElement("script");o.type="text/javascript",o.src=`${location.protocol}//${this.#ge}/script/atagv2.js`,o.onload=()=>{this.#be.add(t),new X(n)},o.onerror=()=>{this.#i.error(`failed loading ${o.src}`)},document.head.appendChild(o)}runVideoSlider(e){if(this.#ue.videoSlider)return void this.#i.error("videoslider zone already loaded on page");this.#ue.videoSlider=!0;const{zoneId:t,sub1:i,vastXml:n,linkedZoneId:o}=e;if(!t)throw new Error("mandatory zoneId is not provided!");if(!D(t))throw new Error("zoneId is not a string!");const s={zoneId:t,sub1:i,adserverDomain:this.#m,adcashGlobalName:this.#ye,uniqueFingerprint:this.#x,isPreviewMode:this.#Ae,vastXml:n,linkedZoneId:o,adblockSettings:this.#r};if(this.#Ie.VideoSlider)return s.isLoadedAsPartOfLibrary=!0,void new this.#Ie.VideoSlider(s);if(window.VideoSlider)new VideoSlider(s);else{const e=document.createElement("script");e.type="text/javascript",e.src=`${window.location.protocol}//${this.#ge}/script/videoSliderAlt.js`,e.onload=()=>{this.#be.add(t),new VideoSlider(s)},e.onerror=()=>{this.#i.error(`failed loading ${e.src}`)},document.head.appendChild(e)}}}const le=new e("aclib_index");window.Adcash?le.debug("lib already on page. exit"):(le.debug("load lib on page"),((e={})=>{const t={aclib:new de(e),Adcash:de,AtcshAltNm:de};Object.keys(t).forEach(e=>{Object.defineProperty(window,e,{value:t[e]})})})())}();
